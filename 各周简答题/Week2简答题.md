# 回答问题

## 1.Direct3D和OpenGL在空间上的差异

（有图片，https://pbitng9tzw.feishu.cn/docx/CQfZdlXN0oAvy4xLB1OcbuKUnhb）

## 局部空间

#### Direct3D

+ **局部空间**被**定义**为该**对象的本地坐标系**，即原点位于对象几何中心，并且**以其自身的方向**作为**坐标系轴向**
+ Direct3D使用**右手坐标系**，其中X轴指向右侧，Y轴指向上方，**Z轴指向观察者的眼睛**，因此物体是**按照左手坐标系显示**的

#### OpenGL

+ **局部空间**的**定义与对象无关**。OpenGL中的局部空间**基于矩阵变换**，即将物体从其局部坐标系变换为世界坐标系，**以便它位于适当位置**
+ 在局部空间中，OpenGL使用**左手坐标系**，其中X轴指向右侧，Y轴指向上方，**Z轴指向观察者的远离屏幕的方向**

## 世界空间

#### Direct3D

+ 世界空间是**右手坐标系**，其中x轴指向右侧，y轴指向上方，**z轴指向屏幕内部**

#### OpenGL

+ 世界空间是**左手坐标系**，x轴指向右侧，y轴指向上方，**z轴则指向屏幕外部**

## 相机空间

#### Direct3D

+ 相机的**视锥体**是**左手系**
+ **深度缓冲**的**取值范围为0到1**，其中0代表最近的距离，1代表最远的距离

#### openGL

+ 相机的**视锥体**是**右手系**
+ **深度缓冲**的**取值范围可以是任何从0到1的范围**，但通常情况下仍然是0到1

## 裁剪空间

#### Direct3D

+ 裁剪空间中的**几何体是左手系**,**z分量**从**近**裁剪面到**远**裁剪面**单调递增**

#### OpenGL

+ 裁剪空间中的**几何体是右手系**,z分量从远裁剪面到近裁剪面**单调递减**。
+ 裁剪空间中的**w分量是相反的**，因为使用的**透视矩阵的第四行取负值**，而Direct3D则不是。



### X_Jun变换里提到的差异

### 3D坐标系

#### Direct3D

+ 左手坐标系

#### OpenGL

+ 右手坐标系

![4](C:\Users\DoubleT\Desktop\工作室\qg\4.png)

### 纹理坐标系和屏幕坐标系：

#### Direct3D

![D3D纹理](C:\Users\DoubleT\Desktop\工作室\qg\D3D纹理.png)

![D3D屏幕](C:\Users\DoubleT\Desktop\工作室\qg\D3D屏幕.png)

#### OpenGL

![OpenGL纹理](C:\Users\DoubleT\Pictures\Screenshots\OpenGL纹理.png)

![OpenGL屏幕](C:\Users\DoubleT\Desktop\工作室\qg\OpenGL屏幕.png)

## 2.齐次空间

+ 齐次坐标(x,y,z,w)的定义是n维空间在w=1处的n-1维空间的坐标点---->**齐次空间是n维空间在w=1处的平面（？）**
+ 齐次坐标的作用是方便地对点和向量进行统一的处理，使平移变换只应用于点（位置向量）------->**齐次空间的目的是为了能够在高维度做变换然后在映射到低维度空间上**。
     + 简单说明：
       - 在一维空间中的一条线段上取一点x，想转移x的位置，那应该是x'=x+k，但是能使用一维的矩阵来表示这变换吗？不能，因为此时一维的矩阵只能让x点伸缩。但如果变成了一维的齐次空间[k 1]就很容易地做到。
       - 同样地，在二维空间中，某一图形如果不使用二维的齐次坐标，则只能旋转和伸缩，确不能平移。
       - **因此，在3D坐标中使用齐次坐标，变换到四维的齐次空间，是为了模型在矩阵变换中，除了伸缩旋转，还能够平移**
       - eg: 一个二维的字母，首先把它变换到三维空间，做各种旋转或者拉伸，然后再映射到二维空间上，从而使得二维图像也可以有一些简单的三维特效。

## 3.Model矩阵中的复合矩阵按哪些顺序相乘，原因

+ 按**缩放-->旋转-->平移**顺序相乘

+ 原因：
  + 在模型刚刚放入世界坐标系的时候使用的是局部坐标，也就是局部和世界坐标系的原点和坐标轴都是重合的，此时所有模型都“把世界坐标系当做自己的本地坐标系”
  + **如果是旋转-->缩放**：
    + 假设一个顶点坐标(x,y,z)要放大到2倍，通过矩阵的计算公式，它的坐标会变化为(2x,2y,2z)，对于x，它缩放的原点就是局部坐标系的原点，缩放的方向就是(1,0,0)。
    + 如果旋转之后再缩放，它的缩放变换矩阵还是那个矩阵，也就是意味着对于x来说，它缩放的方向仍然是(1,0,0)，但此时是旋转之后世界坐标系下的(1,0,0)了，而不是局部坐标系下了，所以会导致物体的畸变。
    + 对于缩放矩阵参考的其它参数，也可同以上类推得如果是旋转-->缩放，得出结果会出问题。
  + **如果是平移-->旋转**：
    + 顶点的旋转必须要知道的两个参数，旋转轴和旋转角度，而旋转轴又需要通过旋转方向和一个点的坐标来确定。
    + 分析旋转矩阵里的行列数字就可以知道，旋转的方向由不同旋转矩阵分别指定，但是旋转的轴心点就是原点(0,0,0)
    + 所以如果平移之后再旋转，它的旋转矩阵已经决定了它只能按照世界坐标系下的(0,0,0)进行旋转，所以就会出错。（像地球公转太阳似的）
  + **如果是平移-->缩放**：当缩放在平移之后进行时会发生，就绕自己几何中心（局部坐标系原点）以外位置进行缩放，就会导致扭曲，像踩扁的可乐罐。
  + **如果是缩放-->旋转-->平移**：
    + 缩放变换不改变坐标轴的走向，也不改变原点的位置，所以两个坐标系仍然重合。
    + 旋转变换改变坐标轴的走向，但不改变原点的位置，所以两个坐标系坐标轴不再处于相同走向。
    + 平移变换不改变坐标轴走向，但改变原点位置，两个坐标系原点不再重合。
    + 最终使得模型以原本的形状，以特定的角度，特定的位置处于世界空间中，实现原本变换的目的

## 4.正交投影和透视投影区别

(有图片，可看飞书https://pbitng9tzw.feishu.cn/docx/DVsKde9d6os1JIx8Cjkc7pFAnjd)

### 区别----方法，原理，效果和应用领域不同

#### 正交投影

+ **方法**：
  + 正交投影就是摄像机在原点，看向-z方向，顶部在y方向，在看向物体时将所有物体的z值归0，将物体平移并缩放到[-1,1]^2之间。在三维空间中规定可观测区域，这个区域是个立方体。需要设置它的宽度，高度和深度六个数据。再将这个立方体移动、缩小或放大到挤满X(-1~1),Y(-1~1),Z(-1~1)的立方体区域内。![正投](C:\Users\DoubleT\Desktop\工作室\qg\正投.png)

+ **原理**：
  + ‘正交投影则是将物体在三个坐标轴上的投影长度按比例缩小，直接投影到二维平面上，不考虑透视效果。

+ **效果**：
  + 正交投影产生的图片中的物体只与他本身的大小有关，与距离无关。
  + 正交投影的图像看起来比较扁平，没有透视感，但可以准确地显示物体的形状和大小。

+ **应用领域**：正交投影常用于工程制图、机械设计等需要精确尺寸的领域。

#### 透视投影

+ **方法**：

  + 首先把透视投影“挤”成正交投影，然后再做正交投影
    ![在这里插入图片描述](https://img-blog.csdnimg.cn/20200520001543307.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzMTQ5MDUx,size_16,color_FFFFFF,t_70)

+ **原理**：

  +  透视投影就是近大远小，平行线也会变得不平行，人们眼睛所看到的就是透视投影的结果。
  +  透视投影是根据人眼看物体的视觉原理，将物体在视点处产生的透视效果投影到二维平面上。

+ **效果**：

  + 使得近处的物体大、远处的物体小、并且形成一定的透视感。

+ **应用领域**：

  + 透视投影常用于绘制建筑、景观、人物等真实场景的画面。

  ![正投透投](C:\Users\DoubleT\Desktop\工作室\qg\正投透投.png)



![正投透投2](C:\Users\DoubleT\Desktop\工作室\qg\正投透投2.png)

